<!--
Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.
PDX-License-Identifier: MIT-0 (For details, see https://github.com/awsdocs/amazon-rekognition-developer-guide/blob/master/LICENSE-SAMPLECODE.)
-->
<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
  <meta charset="UTF-8">
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
    <script src="ajax.js"></script>
  <title>Samaritian Book-Rekognition</title>
  <style>
    .test {
      border: 0px solid black
    }
  </style>
</head>

<body>
  <div class="container d-flex test mt-2" style="align-items: left;">
    <video class="container test"  height="500px" id="video" src="" autoplay>
    </video>
    <canvas id="canvas" style="overflow:auto;display:none"></canvas>
    <a href="" id="download" download>
      <img src="" id="tempimage" alt="">
    </a>
  </div>
  <div class="container test " style="margin-top: 10px;display: flex;">
    <form enctype="multipart/form-data" class="d-flex" id="facerecog">
      <input type="file" class="form-control" style="width: 400px; margin-right:10px" name="image" id="picinput">
      <button type="submit" id="submitform" class="btn btn-danger">Upload your image to continue further</button>
    </form><br>
    <button class="btn btn-danger" style="margin-left: 50px;margin-right: 50px;" id="capture" onclick="capture()">Or capture your image</button>
    <button class="btn btn-danger" style="float:right;display:none;margin-right: 10px;" id="submitpic" onclick="submitpic()">Click here to download the image</button>
  </div>  
</body>
<script>
  navigator.mediaDevices.getUserMedia({
    video: true
  }).then((stream) => {
    document.getElementById("video").srcObject = stream

  })
  function capture() {
    document.getElementById("capture").innerHTML="capture another image"
    $("#submitpic").fadeIn("slow")
    var canvas = document.getElementById("canvas");
    var video = document.querySelector("video");
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    canvas
      .getContext("2d")
      .drawImage(video, 0, 0, video.videoWidth, video.videoHeight);
    console.log(canvas)
    let img=canvas.toDataURL("image/jpeg")
    document.getElementById("tempimage").src=img
  }
</script>

</html>